{
  "type": "page",
  "title": "登录注册",
  "body": [
    {
      "title": "",
      "actions": [
        {
          "label": "登录/注册",
          "type": "submit",
          "level": "success"
        }
      ],
      "body": [
        {
          "type": "fieldSet",
          "title": "登录/注册信息",
          "body": [
            {
              "type": "input-text",
              "label": "手机号",
              "name": "phone",
              "size": "md",
              "required": true
            },
            {
              "type": "input-text",
              "label": "验证码",
              "name": "code",
              "size": "md",
              "required": true
            }
          ]
        }
      ],
      "type": "form",
      "mode": "horizontal",
      "affixFooter": true,
      "panelClassName": "Panel--default",
      "bodyClassName": "text-lg",
      "redirect": "",
      "api": {
        "url": "${ls:backend_url}/user-login/save",
        "method": "post",
        "requestAdaptor": "let jsonObj = {};\n\nlet content = JSON.parse(api.data.msgContent).content\nlet url = JSON.parse(api.data.msgContent).url\nlet title = JSON.parse(api.data.msgContent).title\nlet sendType = JSON.parse(api.data.msgContent).sendType\nlet picUrl = JSON.parse(api.data.msgContent).picUrl\n\n\n// push通知栏\nif(api.data.sendChannel == '20'){\n    jsonObj.content = content\n    jsonObj.url = url\n    jsonObj.title = title\n}\n// 短信\nif(api.data.sendChannel == '30'){\n    jsonObj.url = url\n    jsonObj.content = content\n}\n// 邮件\nif(api.data.sendChannel == '40'){\n    jsonObj.content = content\n    jsonObj.title = title\n    jsonObj.url = url\n}\n// 企业微信(应用消息)\nif (api.data.sendChannel == '70') {\n    // 文本、markdown类型\n    if (sendType == '10' || sendType =='80') {\n        jsonObj.content = content\n        jsonObj.sendType = sendType\n    }\n    // 图片、视频、语音、文件类型\n    if(sendType =='20' || sendType =='30' || sendType =='60' || sendType=='100'){\n        jsonObj.sendType = sendType\n        jsonObj.mediaId = api.data.mediaId\n    }\n    // 文本卡片类型\n    if(sendType =='50'){\n        jsonObj.sendType = sendType\n        jsonObj.title = title\n        jsonObj.url= url \n        jsonObj.description = api.data.description\n    }\n    // 图文类型\n    if(sendType == '40'){\n        jsonObj.sendType = sendType\n        jsonObj.articles = JSON.stringify(api.data.articles)\n    }\n\n}\n// 企业微信(机器人)\nif (api.data.sendChannel == '100') {\n    // 文本类型\n    if (sendType == '10') {\n        jsonObj.content = content\n        jsonObj.sendType = sendType\n    }\n    // markdown类型\n    if (sendType == '80') {\n        jsonObj.content = content\n        jsonObj.sendType = sendType\n    }\n     // 图片类型\n    if (sendType == '100') {\n        jsonObj.md5 = api.data.md5\n        jsonObj.base64 = api.data.base64\n        jsonObj.sendType = sendType\n    }\n     // 文件类型\n    if (sendType == '60') {\n        jsonObj.sendType = sendType\n        jsonObj.mediaId = api.data.mediaId\n    }\n    // 图文类型\n    if(sendType == '40'){\n        jsonObj.sendType = sendType\n        jsonObj.articles = JSON.stringify(api.data.articles)\n    }\n}\n// 微信服务号\nif (api.data.sendChannel == '50') {\n    jsonObj.path = api.data.path\n    jsonObj.miniProgramId = api.data.miniProgramId\n    jsonObj.templateId = api.data.templateId\n    jsonObj.url = url\n    jsonObj.linkType = api.data.linkType\n\n    // 模板参数\n    jsonObj.officialAccountParam = JSON.stringify(api.data.officialAccountParam[0])\n}\n// 微信小程序\nif (api.data.sendChannel == '60') {\n    jsonObj.page = api.data.page\n    jsonObj.templateId = api.data.templateId\n    // 模板参数\n    jsonObj.miniProgramParam = JSON.stringify(api.data.miniProgramParam[0])\n}\n\n// 钉钉机器人\nif (api.data.sendChannel == '80') {\n    // 文本类型(text)\n    if (sendType == '10') {\n        jsonObj.content = content\n        jsonObj.sendType = sendType\n    }\n    // 图文类型(FeedCard)\n    if (sendType == '40') {\n        jsonObj.sendType = sendType\n        jsonObj.feedCards = JSON.stringify(api.data.feedCards)\n    }\n    // markdown类型(markdown)\n    if (sendType == '80') {\n        jsonObj.content = content\n        jsonObj.sendType = sendType\n        jsonObj.title = title\n    }\n    // 链接类型(link)\n    if (sendType == '110') {\n        jsonObj.content = content\n        jsonObj.sendType = sendType\n        jsonObj.title = title\n        jsonObj.picUrl = picUrl\n        jsonObj.url = url\n    }\n    // 卡片跳转(actionCard)\n    if (sendType == '120') {\n        jsonObj.title = title\n        jsonObj.content = content\n        jsonObj.btnOrientation = api.data.btnOrientation\n        jsonObj.btns = JSON.stringify(api.data.btns)\n        jsonObj.sendType = sendType\n    }\n}\n// 钉钉工作消息\nif (api.data.sendChannel == '90') {\n    // 文本类型\n    if (sendType == '10') {\n        jsonObj.content = content\n        jsonObj.sendType = sendType\n    }\n    // 语音类型\n    if (sendType == '20') {\n        jsonObj.sendType = sendType\n        jsonObj.duration = api.data.duration\n        jsonObj.mediaId = api.data.mediaId\n    }\n    // 文件类型 || 图片类型\n    if (sendType == '60' || sendType == '100') {\n        jsonObj.sendType = sendType\n        jsonObj.mediaId = api.data.mediaId\n    }\n    // 链接类型\n    if (sendType == '110') {\n        jsonObj.content = content\n        jsonObj.sendType = sendType\n        jsonObj.title = title\n        jsonObj.mediaId = api.data.mediaId\n        jsonObj.url = url\n    }\n    // markdown类型(markdown)\n    if (sendType == '80') {\n        jsonObj.content = content\n        jsonObj.sendType = sendType\n        jsonObj.title = title\n    }\n    // 卡片跳转(actionCard)\n    if (sendType == '120') {\n        jsonObj.title = title\n        jsonObj.content = content\n        jsonObj.btnOrientation = api.data.btnOrientation\n        jsonObj.btns = JSON.stringify(api.data.btns)\n        jsonObj.sendType = sendType\n    }\n    \n    // OA(actionCard)\n    if (sendType == '130') {\n        \n        // 头部\n        var head = {}\n        head.bgcolor = api.data.dingDingOaHeadBgColor\n        head.text = api.data.dingDingOaHeadTitle\n        jsonObj.dingDingOaHead = head\n        \n        // body\n        var body = {}\n        body.title = api.data.dingDingOaTitle\n        body.content = api.data.dingDingOaContent\n        body.image = api.data.mediaId\n        body.author = api.data.dingDingOaAuthor\n        jsonObj.dingDingOaBody = body\n        \n        // 通用\n        jsonObj.sendType = sendType\n        jsonObj.url = url\n    }\n}\n\n// 飞书群机器人\nif (api.data.sendChannel == '110') {\n    // 文本类型\n    if (sendType == '10') {\n        jsonObj.content = content\n        jsonObj.sendType = sendType\n    }\n\n    // 通用\n    jsonObj.sendType = sendType\n    jsonObj.url = url\n}\n\napi.data.msgContent = JSON.stringify(jsonObj)\nreturn api;",
        "data": {
          "phone": "${phone}",
          "code": "${code}",
          "officialAccountParam": "${officialAccountParam}",
          "templateId": "${templateId}",
          "path": "${path}",
          "miniProgramId": "${miniProgramId}",
          "linkType": "${linkType}",
          "page": "${page}",
          "miniProgramParam": "${miniProgramParam}",
          "md5": "${md5}",
          "base64": "${base64}",
          "articles": "${articles}",
          "description": "${description}",
          "msgContent": "{\"content\":\"${content}\",\"url\":\"${url}\",\"title\":\"${title}\",\"sendType\":\"${sendType}\",\"picUrl\":\"${picUrl}\"}"
        }
      }
    }
  ],
  "toolbar": [
    {
      "type": "button",
      "actionType": "link",
      "link": "/crud/list",
      "label": "返回列表"
    }
  ],
  "messages": {},
  "style": {},
  "bodyClassName": "p-lg p-t-lg p-r-lg p-b-lg p-l-lg m-none m-l-lg m-b-lg m-r-lg m-t-lg m-lg b-5x b-dark r-3x text-dark bg-white w-full font-bold text-lg"
}